<div class="p-6 text-white">
  <h2 class="text-green-400 text-2xl font-bold mb-4">Send Message</h2>

  <form (ngSubmit)="sendEmail()" #emailForm="ngForm" class="bg-green-900 p-6 rounded space-y-4">
    <div>
      <label class="block text-sm mb-1">To</label>
      <input 
        type="email" 
        name="to" 
        [(ngModel)]="email.to" 
        required 
        class="w-full p-2 rounded text-black focus:outline-none focus:ring-2 focus:ring-green-400">
    </div>

    <div>
      <label class="block text-sm mb-1">Select Evidence</label>
      <select 
        name="evidenceId" 
        [(ngModel)]="email.evidenceId" 
        required 
        (change)="onEvidenceSelect()"
        class="w-full p-2 rounded text-black focus:outline-none focus:ring-2 focus:ring-green-400">
        <option value="">-- Select Evidence to Share --</option>
        <option *ngFor="let evidence of evidences" [value]="evidence.id">
          ID: {{evidence.id}} - {{evidence.temuan | slice:0:50}}{{evidence.temuan.length > 50 ? '...' : ''}}
        </option>
      </select>
    </div>

    <div *ngIf="selectedEvidence" class="bg-green-800 p-4 rounded text-sm">
      <h4 class="text-green-200 font-semibold mb-2">📋 Evidence Preview:</h4>
      <div class="text-white space-y-1">
        <p><strong>ID:</strong> {{selectedEvidence.id}}</p>
        <p><strong>Status:</strong> {{selectedEvidence.status}}</p>
        <p><strong>Progress:</strong> {{selectedEvidence.progress}}</p>
        <p><strong>Tanggal:</strong> {{selectedEvidence.tanggal | date:'dd-MM-yyyy'}}</p>
        <p><strong>Temuan:</strong> {{selectedEvidence.temuan}}</p>
      </div>
    </div>

    <div>
      <label class="block text-sm mb-1">Message</label>
      <textarea 
        name="message" 
        [(ngModel)]="email.message" 
        rows="5" 
        required 
        class="w-full p-2 rounded text-black focus:outline-none focus:ring-2 focus:ring-green-400"></textarea>
    </div>

    <button 
      type="submit" 
      [disabled]="!emailForm.valid"
      class="bg-green-500 px-4 py-2 rounded hover:bg-green-600 transition">
      ✉️ Send Email
    </button>
  </form>
</div>